# Joshix.com New Underneath (`jxnu`)

Work in progress. Move the same old content to new infrastructure.

Markdown source, config, and tools for the [joshix.com][jx] web site
container image. This image [`acbuild begin`][acbuild-begin]s
with the [caddybox web server ACI][caddybox], then
adds HTML content generated by [Hugo][hugo].

##  Generate joshix.com app container image

### Builder

Steps 1-4 are rolled into the [`mknu.bash`][mknu-script] script.

1. Sync master branch of jxnu on a machine with `git`, `hugo` and `acbuild`:  
`$ cd jxnu && git pull`
2. (Sometimes) sync `jxnu/themes/bootstrap` with its upstream:  
`$ cd themes/bootstrap && git pull`
3. Run `hugo` to generate the site
4. Run `jxnu/acbuild-jxnu.bash` to `hugo` the site and `acbuild` the site container:  
`$ cd .. && ./acbuild-jxnu.bash`
5. Copy the resulting `jxnu-vM.N-caddy-vX.Y.Z-linux-amd64.aci` to server

### Server

6. Update the `jxnu-aci.service` systemd unit if the jxnu ACI version changed
7. `$ systemctl stop jxnu-aci`
8. `$ systemctl daemon-reload` if (1), above
9. `$ systemctl start jxnu-aci`


[acbuild-begin]: https://github.com/appc/acbuild/blob/master/Documentation/subcommands/begin.md
[caddybox]: https://github.com/joshix/caddybox
[hugo]: https://gohugo.io/
[mknu-script]: mknu.bash
[jx]: https://joshix.com/

## Legal?

Methods, tools, and scripts are shared under the ASL or their own license.
Text and images beneath `content/` and/or as published on joshix.com are
Copyright (C) 2004-2016 Josh Wood, except where noted. All rights reserved.
